/*! financing_clearing_system v1.0.0
*  by [object Object]
*  (c) 2014-2016 www.frontpay.cn
* updated on 2016-11-14
*  Licensed under Apache-2.0
*/
 ~function(root,$){var treeController={init:function(){this.$el=$(".t-tree-table"),this.$head=this.$el.find(".t-tree-th"),this.expand(),this.scrollFixed(),this.check(),this.checkAll()},expand:function(){var expandMenu=function(){var $li=$(this).closest("li");$li.hasClass("has-children")&&($li.hasClass("has-children-open")?$li.removeClass("has-children-open").find(".has-children").removeClass("has-children-open"):$li.addClass("has-children-open"))};this.$el.on("click",".tree-table-body",expandMenu)},scrollFixed:function(){var that=this,pos=this.$head.position(),thWidth=this.$el.width(),fixedTreeHead=function(){var scrollTop=$(this).scrollTop();scrollTop>pos.top?that.$head.css({left:pos.left+"px",width:thWidth+"px"}).addClass("tree-th-fixed"):that.$head.removeClass("tree-th-fixed").removeAttr("style")};$(window).on("scroll.fixedTreeHead",fixedTreeHead)},check:function(){var that=this,parentCheck=function(obj){var $li=$(obj).closest("li"),$all=$li.find(">.t-tree-item .tree-table-all :checkbox");$all.prop("checked",!0),that.bubbleCheck($li)};this.$el.on("click",".tree-table-bar :checkbox",function(){var isChecked=$(this).is(":checked"),$li=$(this).closest("li"),$bar=$(this).closest(".tree-table-bar");isChecked?(parentCheck(this),$bar.find(":checkbox").eq(0).prop("checked",!0)):that.bubbleCancel($li)})},checkAll:function(){var that=this,childrenChecked=function(){var $li=$(this).closest("li"),isChecked=$(this).is(":checked"),$chkboxs=$li.find(":checkbox");$chkboxs.prop("checked",isChecked),that[isChecked?"bubbleCheck":"bubbleCancel"]($li)};this.$el.on("click",".tree-table-all :checkbox",childrenChecked)},bubbleCheck:function(curItem){var parents=$(curItem).parents(".has-children");parents.find(">.t-tree-item .tree-table-all :checkbox").prop("checked",!0)},bubbleCancel:function(curItem){var thisAll=$(curItem).find(".tree-table-all :checkbox"),thisBar=$(curItem).find(".tree-table-bar :checked"),items=$(curItem).parents(".has-children");0===thisBar.length&&thisAll.prop("checked",!1),items.each(function(){var bars=$(this).find(".tree-table-bar :checked"),alls=$(this).find(">.t-tree-item .tree-table-all :checkbox");0===bars.length&&alls.prop("checked",!1)})}};root.treeController=treeController}(window,jQuery);