/*! financing_clearing_system v1.0.0
*  by [object Object]
*  (c) 2014-2016 www.frontpay.cn
* updated on 2016-11-14
*  Licensed under Apache-2.0
*/
 ~function(module,exports,$){var SearchLayer=function(config){var defaults={el:"#j-search-txt",btn:"#j-search-btn",target:"#j-search-result",beforeSend:$.noop,done:$.noop,url:"",tmplId:"j-result-tmpl"},option=$.extend({},defaults,config);this.$el=$(option.el),this.$btn=$(option.btn),this.$target=$(option.target),this.$layer=null,this.templateId=option.tmplId,this.option=option,this.dataList=[],this.isShown=!1,this.init()};SearchLayer.prototype={constructor:SearchLayer,init:function(){this.$el.length&&this.onEvent()},render:function(data){var arrList=[],arrHtml=['<div class="search-layer-hd">',"<h5>搜索结果</h5>",'<i class="icon-clear"></i>',"</div>",'<div class="search-layer-body">',"</div>"];this.dataList=data,arrList.push("<ul>"),$.isArray(data)?$.each(data,function(i,item){arrList.push("<li><span>"+item.id+"</span><span>"+item.name+'</span><a href="#" class="btn small-btn thirdly" data-mid="'+i+'">选择</a></li>')}):arrList.push("<li>暂无结果</li>"),arrList.push("</ul>"),arrHtml.splice(-1,0,arrList.join("")),this.$layer||(this.$layer=$('<div class="search-layer" />').hide().appendTo($(document.body)),this.handlerEvent()),this.$layer.html(arrHtml.join("")),this.isShown=!0},onEvent:function(){function submit(e){e.preventDefault();var $form=that.$el.closest("form"),mocks=($form.serialize(),[{id:8001,name:"广东钱途商业服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"},{id:8002,name:"广东钱端商业服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"},{id:8003,name:"网金控股服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"},{id:8004,name:"广东钱途商业服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"},{id:8005,name:"广东钱途商业服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"},{id:8006,name:"广东钱途商业服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"},{id:8007,name:"广东钱途商业服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"},{id:8008,name:"广东钱途商业服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"},{id:8009,name:"广东钱途商业服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"},{id:8010,name:"广东钱途商业服务有限公司",license:"123456789098765",no:"12345678-9",legal:"张页",contacts:"张小姐",phone:"138****5543",mail:"372883@163.com"}]);that.render(mocks),that.show()}var that=this;this.$btn.on("click",submit)},handlerEvent:function(){var that=this;this.$layer.on("click",".icon-clear",$.proxy(this.hide,this)),that.$layer.on("click","li a",function(e){e.preventDefault();var mid=$(this).data("mid");that.choose(mid)})},show:function(){var h=this.$el.outerHeight(),w=this.$el.outerWidth(),offset=this.$el.offset();this.$layer.stop().css({top:offset.top+h,left:offset.left,width:w}).fadeIn(200)},hide:function(){var that=this;this.$layer.fadeOut(200,function(){that.isShown=!1})},choose:function(mid){var item=this.dataList[mid],html="";item&&(html=template(this.templateId,item),this.$target.html(html),this.$el.val(""),this.hide())}},module[exports]=SearchLayer}(window,"SearchLayer",jQuery);