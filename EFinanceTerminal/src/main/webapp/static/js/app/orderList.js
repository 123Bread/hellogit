/*! financing_clearing_system v1.0.0
*  by [object Object]
*  (c) 2014-2016 www.frontpay.cn
* updated on 2016-11-14
*  Licensed under Apache-2.0
*/
 !function(){function batchOrder(){if(!checkBoxSelected())return void alertLayer();var success=($("#j-order-form").serialize(),function(){successModalLayer({title:"审核成功",callback:function(){location.reload()}})});success()}function sendNotifyMessage(){if(!checkBoxSelected())return void alertLayer();var success=($("#j-order-form").serialize(),function(){successModalLayer({title:"审核成功",callback:function(){location.reload()}})});success()}function sendChangeMessage(){if(!checkBoxSelected())return void alertLayer();var success=($("#j-order-form").serialize(),function(){successModalLayer({title:"审核成功",callback:function(){location.reload()}})});success()}function checkBoxSelected(){var checkedBoxs=$("#j-body :checkbox:checked");return checkedBoxs.length}function alertLayer(title){title=title||"请先选择渠道",alertModalLayer({title:title})}function cancelApply(){function myConfirm(){var success=function(){successModalLayer({title:"操作成功",callback:function(){location.reload()}})};success()}var orderNo=($(this).data("mid"),$(this).data("orderno"));confirmModalLayer({title:"确认 <b>置为失效</b> 后，仓单: "+orderNo+"将不可融资，<br/>状态设置“已失效”",content:"是否确定置为失效？",callback:myConfirm})}function viewDetail(){var tmplHtml=($(this).data("mid"),template("j-tmpl-detail")),success=function(data){data={money:"1000.00",type:"强制竞拍",time:"2016-01-08 22:30"},$("#j-modal-detail").modal({title:"货物处置记录",content:tmplHtml(data)})};success()}var handler={batchOrder:batchOrder,sendNotifyMessage:sendNotifyMessage,sendChangeMessage:sendChangeMessage},initApp=function(){$('[data-toggle="checkAll"]').checkAll();var actions=[null,"batchOrder","sendNotifyMessage","sendChangeMessage"];$(".j-btn-action a").on("click",function(e){var index=$(this).index();handler[actions[index]]&&handler[actions[index]]()}),$(document).on("click",".j-cancel",cancelApply),$(document).on("click",".j-detail",viewDetail),$("#j-main-table").dataTable({bSort:!1})};$(initApp)}();